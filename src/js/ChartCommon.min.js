WT_DECLARE_WT_MEMBER(2,JavaScriptConstructor,"ChartCommon",function(A){function E(a,c,b,d){function e(j){return b?c[j]:c[n-1-j]}function i(j){for(;e(j)[2]===w||e(j)[2]===B;)j--;return j}var k=l;if(d)k=m;var n=c.length;d=Math.floor(n/2);d=i(d);var q=0,s=n,f=false;if(e(0)[k]>a)return b?-1:n;if(e(n-1)[k]<a)return b?n:-1;for(;!f;){var h=d+1;if(h<n&&(e(h)[2]===w||e(h)[2]===B))h+=2;if(e(d)[k]>a){s=d;d=Math.floor((s+q)/2);d=i(d)}else if(e(d)[k]===a)f=true;else if(h<n&&e(h)[k]>a)f=true;else if(h<n&&e(h)[k]===
a){d=h;f=true}else{q=d;d=Math.floor((s+q)/2);d=i(d)}}return b?d:n-1-d}function G(a,c){return c[0][a]<c[c.length-1][a]}var w=2,B=3,l=0,m=1,F=this;A=A.WT.gfxUtils;var x=A.rect_top,y=A.rect_bottom,t=A.rect_left,C=A.rect_right,H=A.transform_mult;this.findClosestPoint=function(a,c,b){var d=l;if(b)d=m;var e=G(d,c);b=E(a,c,e,b);if(b<0)b=0;if(b>=c.length)return[c[c.length-1][l],c[c.length-1][m]];if(b>=c.length)b=c.length-2;if(c[b][d]===a)return[c[b][l],c[b][m]];var i=e?b+1:b-1;if(e&&c[i][2]==w)i+=2;if(!e&&
i<0)return[c[b][l],c[b][m]];if(!e&&i>0&&c[i][2]==B)i-=2;e=Math.abs(a-c[b][d]);a=Math.abs(c[i][d]-a);return e<a?[c[b][l],c[b][m]]:[c[i][l],c[i][m]]};this.minMaxY=function(a,c){c=c?l:m;for(var b=a[0][c],d=a[0][c],e=1;e<a.length;++e)if(a[e][2]!==w&&a[e][2]!==B&&a[e][2]!==5){if(a[e][c]>d)d=a[e][c];if(a[e][c]<b)b=a[e][c]}return[b,d]};this.projection=function(a,c){var b=Math.cos(a);a=Math.sin(a);var d=b*a,e=-c[0]*b-c[1]*a;return[b*b,d,d,a*a,b*e+c[0],a*e+c[1]]};this.distanceSquared=function(a,c){a=[c[l]-
a[l],c[m]-a[m]];return a[l]*a[l]+a[m]*a[m]};this.distanceLessThanRadius=function(a,c,b){return b*b>=F.distanceSquared(a,c)};this.toZoomLevel=function(a){return Math.floor(Math.log(a)/Math.LN2+0.5)+1};this.isPointInRect=function(a,c){var b;if(a.x!==undefined){b=a.x;a=a.y}else{b=a[0];a=a[1]}return b>=t(c)&&b<=C(c)&&a>=x(c)&&a<=y(c)};this.toDisplayCoord=function(a,c,b,d,e){if(b){a=[(a[l]-e[0])/e[2],(a[m]-e[1])/e[3]];d=[d[0]+a[m]*d[2],d[1]+a[l]*d[3]]}else{a=[(a[l]-e[0])/e[2],1-(a[m]-e[1])/e[3]];d=[d[0]+
a[l]*d[2],d[1]+a[m]*d[3]]}return H(c,d)};this.findYRange=function(a,c,b,d,e,i,k,n){if(a.length!==0){var q=F.toDisplayCoord([b,0],[1,0,0,1,0,0],e,i,k),s=F.toDisplayCoord([d,0],[1,0,0,1,0,0],e,i,k),f=e?m:l,h=e?l:m,j=G(f,a),g=E(q[f],a,j,e),o=E(s[f],a,j,e),p,r,u=Infinity,v=-Infinity,D=g===o&&g===a.length||g===-1&&o===-1;if(!D){if(j)if(g<0)g=0;else{g++;if(a[g]&&a[g][2]===w)g+=2}else if(g>=a.length-1)g=a.length-2;if(!j&&o<0)o=0;for(p=Math.min(g,o);p<=Math.max(g,o)&&p<a.length;++p)if(a[p][2]!==w&&a[p][2]!==
B){if(a[p][h]<u)u=a[p][h];if(a[p][h]>v)v=a[p][h]}if(j&&g>0||!j&&g<a.length-1){if(j){r=g-1;if(a[r]&&a[r][2]===B)r-=2}else{r=g+1;if(a[r]&&a[r][2]===w)r+=2}p=(q[f]-a[r][f])/(a[g][f]-a[r][f]);g=a[r][h]+p*(a[g][h]-a[r][h]);if(g<u)u=g;if(g>v)v=g}if(j&&o<a.length-1||!j&&o>0){if(j){j=o+1;if(a[j][2]===w)j+=2}else{j=o-1;if(a[j][2]===B)j-=2}p=(s[f]-a[o][f])/(a[j][f]-a[o][f]);g=a[o][h]+p*(a[j][h]-a[o][h]);if(g<u)u=g;if(g>v)v=g}}var z;a=k[2]/(d-b);b=e?2:3;if(!D){z=i[b]/(v-u);z=i[b]/(i[b]/z+20);if(z>n.y[c])z=n.y[c]}c=
e?[q[m]-x(i),!D?(u+v)/2-i[2]/z/2-t(i):0]:[q[l]-t(i),!D?-((u+v)/2+i[3]/z/2-y(i)):0];return{xZoom:a,yZoom:z,panPoint:c}}};this.matchesXAxis=function(a,c,b,d,e){if(e){if(c<x(b)||c>y(b))return false;if((d.side==="min"||d.side==="both")&&a>=t(b)-d.width&&a<=t(b))return true;if((d.side==="max"||d.side==="both")&&a<=C(b)+d.width&&a>=C(b))return true}else{if(a<t(b)||a>C(b))return false;if((d.side==="min"||d.side==="both")&&c<=y(b)+d.width&&c>=y(b))return true;if((d.side==="max"||d.side==="both")&&c>=x(b)-
d.width&&c<=x(b))return true}return false};this.matchYAxis=function(a,c,b,d,e){function i(){return d.length}function k(h){return d[h].side}function n(h){return d[h].width}function q(h){return d[h].minOffset}function s(h){return d[h].maxOffset}if(e){if(a<t(b)||a>C(b))return-1}else if(c<x(b)||c>y(b))return-1;for(var f=0;f<i();++f)if(e)if((k(f)==="min"||k(f)==="both")&&c>=x(b)-q(f)-n(f)&&c<=x(b)-q(f))return f;else{if((k(f)==="max"||k(f)==="both")&&c>=y(b)+s(f)&&c<=y(b)+s(f)+n(f))return f}else if((k(f)===
"min"||k(f)==="both")&&a>=t(b)-q(f)-n(f)&&a<=t(b)-q(f))return f;else if((k(f)==="max"||k(f)==="both")&&a>=C(b)+s(f)&&a<=C(b)+s(f)+n(f))return f;return-1}});
