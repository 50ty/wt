WT_DECLARE_WT_MEMBER(2,JavaScriptConstructor,"ChartCommon",function(x){function E(a,b,c,d){function e(j){return c?b[j]:b[n-1-j]}function i(j){for(;e(j)[2]===v||e(j)[2]===y;)j--;return j}var k=l;if(d)k=m;var n=b.length;d=Math.floor(n/2);d=i(d);var q=0,s=n,f=false;if(e(0)[k]>a)return c?-1:n;if(e(n-1)[k]<a)return c?n:-1;for(;!f;){var h=d+1;if(h<n&&(e(h)[2]===v||e(h)[2]===y))h+=2;if(e(d)[k]>a){s=d;d=Math.floor((s+q)/2);d=i(d)}else if(e(d)[k]===a)f=true;else if(h<n&&e(h)[k]>a)f=true;else if(h<n&&e(h)[k]===
a){d=h;f=true}else{q=d;d=Math.floor((s+q)/2);d=i(d)}}return c?d:n-1-d}function G(a,b){return b[0][a]<b[b.length-1][a]}var v=2,y=3,l=0,m=1,F=this;x=x.WT.gfxUtils;var A=x.rect_top,B=x.rect_bottom,z=x.rect_left,C=x.rect_right,H=x.transform_mult;this.findClosestPoint=function(a,b,c){var d=l;if(c)d=m;var e=G(d,b);c=E(a,b,e,c);if(c<0)c=0;if(c>=b.length)return[b[b.length-1][l],b[b.length-1][m]];if(c>=b.length)c=b.length-2;if(b[c][d]===a)return[b[c][l],b[c][m]];var i=e?c+1:c-1;if(e&&b[i][2]==v)i+=2;if(!e&&
i<0)return[b[c][l],b[c][m]];if(!e&&i>0&&b[i][2]==y)i-=2;e=Math.abs(a-b[c][d]);a=Math.abs(b[i][d]-a);return e<a?[b[c][l],b[c][m]]:[b[i][l],b[i][m]]};this.minMaxY=function(a,b){b=b?l:m;for(var c=a[0][b],d=a[0][b],e=1;e<a.length;++e)if(a[e][2]!==v&&a[e][2]!==y&&a[e][2]!==5){if(a[e][b]>d)d=a[e][b];if(a[e][b]<c)c=a[e][b]}return[c,d]};this.projection=function(a,b){var c=Math.cos(a);a=Math.sin(a);var d=c*a,e=-b[0]*c-b[1]*a;return[c*c,d,d,a*a,c*e+b[0],a*e+b[1]]};this.distanceSquared=function(a,b){a=[b[l]-
a[l],b[m]-a[m]];return a[l]*a[l]+a[m]*a[m]};this.distanceLessThanRadius=function(a,b,c){return c*c>=F.distanceSquared(a,b)};this.toZoomLevel=function(a){return Math.floor(Math.log(a)/Math.LN2+0.5)+1};this.isPointInRect=function(a,b){var c;if(a.x!==undefined){c=a.x;a=a.y}else{c=a[0];a=a[1]}return c>=z(b)&&c<=C(b)&&a>=A(b)&&a<=B(b)};this.toDisplayCoord=function(a,b,c,d,e){if(c){a=[(a[l]-e[0])/e[2],(a[m]-e[1])/e[3]];d=[d[0]+a[m]*d[2],d[1]+a[l]*d[3]]}else{a=[(a[l]-e[0])/e[2],1-(a[m]-e[1])/e[3]];d=[d[0]+
a[l]*d[2],d[1]+a[m]*d[3]]}return H(b,d)};this.findYRange=function(a,b,c,d,e,i,k,n){if(a.length!==0){var q=F.toDisplayCoord([c,0],[1,0,0,1,0,0],e,i,k),s=F.toDisplayCoord([d,0],[1,0,0,1,0,0],e,i,k),f=e?m:l,h=e?l:m,j=G(f,a),g=E(q[f],a,j,e),o=E(s[f],a,j,e),p,r,t=Infinity,u=-Infinity,D=g===o&&g===a.length||g===-1&&o===-1;if(!D){if(j)if(g<0)g=0;else{g++;if(a[g]&&a[g][2]===v)g+=2}else if(g>=a.length-1)g=a.length-2;if(!j&&o<0)o=0;for(p=Math.min(g,o);p<=Math.max(g,o)&&p<a.length;++p)if(a[p][2]!==v&&a[p][2]!==
y){if(a[p][h]<t)t=a[p][h];if(a[p][h]>u)u=a[p][h]}if(j&&g>0||!j&&g<a.length-1){if(j){r=g-1;if(a[r]&&a[r][2]===y)r-=2}else{r=g+1;if(a[r]&&a[r][2]===v)r+=2}p=(q[f]-a[r][f])/(a[g][f]-a[r][f]);g=a[r][h]+p*(a[g][h]-a[r][h]);if(g<t)t=g;if(g>u)u=g}if(j&&o<a.length-1||!j&&o>0){if(j){j=o+1;if(a[j][2]===v)j+=2}else{j=o-1;if(a[j][2]===y)j-=2}p=(s[f]-a[o][f])/(a[j][f]-a[o][f]);g=a[o][h]+p*(a[j][h]-a[o][h]);if(g<t)t=g;if(g>u)u=g}}var w;a=k[2]/(d-c);c=e?2:3;if(!D){w=i[c]/(u-t);w=i[c]/(i[c]/w+20);if(w>n.y[b])w=n.y[b]}b=
e?[q[m]-A(i),!D?(t+u)/2-i[2]/w/2-z(i):0]:[q[l]-z(i),!D?-((t+u)/2+i[3]/w/2-B(i)):0];return{xZoom:a,yZoom:w,panPoint:b}}};this.matchAxis=function(a,b,c,d,e){function i(){return d.length}function k(h){return d[h].side}function n(h){return d[h].width}function q(h){return d[h].minOffset}function s(h){return d[h].maxOffset}if(e){if(a<z(c)||a>C(c))return-1}else if(b<A(c)||b>B(c))return-1;for(var f=0;f<i();++f)if(e)if((k(f)==="min"||k(f)==="both")&&b>=A(c)-q(f)-n(f)&&b<=A(c)-q(f))return f;else{if((k(f)===
"max"||k(f)==="both")&&b>=B(c)+s(f)&&b<=B(c)+s(f)+n(f))return f}else if((k(f)==="min"||k(f)==="both")&&a>=z(c)-q(f)-n(f)&&a<=z(c)-q(f))return f;else if((k(f)==="max"||k(f)==="both")&&a>=C(c)+s(f)&&a<=C(c)+s(f)+n(f))return f;return-1}});
