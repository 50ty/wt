WT_DECLARE_WT_MEMBER(10,JavaScriptConstructor,"WPaintedWidget",function(Q,t){jQuery.data(t,"obj",this);var u=this;this.imagePreloaders=[];this.images=[];this.canvas=document.getElementById("c"+t.id);this.repaint=function(){};this.widget=t;this.cancelPreloaders=function(){for(var v=0;v<u.imagePreloaders.length;++v)u.imagePreloaders[v].cancel();u.imagePreloaders=[]}});
WT_DECLARE_WT_MEMBER(11,JavaScriptObject,"gfxUtils",function(){function Q(){var h=this;this.path_crisp=function(a){return a.map(function(b){return[Math.floor(b[0])+0.5,Math.floor(b[1])+0.5,b[2]]})};this.transform_mult=function(a,b){if(b.length===2){var d=b[0],f=b[1];return[a[t]*d+a[v]*f+a[B],a[u]*d+a[y]*f+a[C]]}if(b.length===3){if(b[2]===H||b[2]===I)return b.slice(0);d=b[0];f=b[1];return[a[t]*d+a[v]*f+a[B],a[u]*d+a[y]*f+a[C],b[2]]}if(b.length===4){var g,e,c,l;e=h.transform_mult(a,[b[0],b[1]]);d=e[0];
g=e[0];f=e[1];e=e[1];for(c=0;c<3;++c){l=h.transform_mult(a,c==0?[h.rect_left(b),h.rect_bottom(b)]:c==1?[h.rect_right(b),h.rect_top(b)]:[h.rect_right(b),h.rect_bottom(b)]);d=Math.min(d,l[0]);g=Math.max(g,l[0]);f=Math.min(f,l[1]);e=Math.max(e,l[1])}return[d,f,g-d,e-f]}if(b.length===6)return[a[t]*b[t]+a[v]*b[u],a[u]*b[t]+a[y]*b[u],a[t]*b[v]+a[v]*b[y],a[u]*b[v]+a[y]*b[y],a[t]*b[B]+a[v]*b[C]+a[B],a[u]*b[B]+a[y]*b[C]+a[C]];return[]};this.transform_apply=function(a,b){var d=h.transform_mult;return b.map(function(f){return d(a,
f)})};this.transform_det=function(a){return a[t]*a[y]-a[u]*a[v]};this.transform_adjoint=function(a){var b=a[t],d=a[v],f=a[u],g=a[y],e=a[B];a=a[C];return[g,-d,-f,b,a*f-e*g,-(a*b-e*d)]};this.transform_inverted=function(a){var b=h.transform_det(a);if(b!=0){a=h.transform_adjoint(a);return[a[t]/b,a[v]/b,a[u]/b,a[y]/b,a[B]/b,a[C]/b]}else{console.log("inverted(): oops, determinant == 0");return a}};this.transform_assign=function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5]};this.transform_equal=
function(a,b){return a[0]==b[0]&&a[1]==b[1]&&a[2]==b[2]&&a[3]==b[3]&&a[4]==b[4]&&a[5]==b[5]};this.css_text=function(a){return"rgba("+a[0]+","+a[1]+","+a[2]+","+a[3]+")"};this.arcPosition=function(a,b,d,f,g){g=-g/180*Math.PI;return[a+d*Math.cos(g),b+f*Math.sin(g)]};this.pnpoly=function(a,b){var d=false,f=0,g=0,e=a[0];a=a[1];var c,l,k;for(c=0;c<b.length;++c){l=f;k=g;if(b[c][2]===S){k=h.arcPosition(b[c][0],b[c][1],b[c+1][0],b[c+1][1],b[c+2][0]);l=k[0];k=k[1]}else if(b[c][2]===I){k=h.arcPosition(b[c-
2][0],b[c-2][1],b[c-1][0],b[c-1][1],b[c][0]+b[c][1]);l=k[0];k=k[1]}else if(b[c][2]!==H){l=b[c][0];k=b[c][1]}if(b[c][2]!==E)if(g>a!==k>a&&e<(l-f)*(a-g)/(k-g)+f)d=!d;f=l;g=k}return d};this.rect_intersection=function(a,b){a=h.rect_normalized(a);b=h.rect_normalized(b);var d=h.rect_top,f=h.rect_bottom,g=h.rect_left,e=h.rect_right;g=Math.max(g(a),g(b));e=Math.min(e(a),e(b));d=Math.max(d(a),d(b));a=Math.min(f(a),f(b));return[g,d,e-g,a-d]};this.drawRect=function(a,b,d,f){b=h.rect_normalized(b);var g=h.rect_top(b),
e=h.rect_bottom(b),c=h.rect_left(b);b=h.rect_right(b);path=[[c,g,E],[b,g,D],[b,e,D],[c,e,D],[c,g,D]];h.drawPath(a,path,d,f,false)};this.drawPath=function(a,b,d,f,g){function e(j){return j[0]}function c(j){return j[1]}function l(j){return j[2]}var k=0,p=[],n=[],q=[];a.beginPath();b.length>0&&l(b[0])!==E&&a.moveTo(0,0);for(k=0;k<b.length;k++){var i=b[k];switch(l(i)){case E:a.moveTo(e(i),c(i));break;case D:(function(){var j=k===0?[0,0]:b[k-1];if(!d&&!g&&f&&(e(i)-e(j)>16777216||c(i)-c(j)>16777216)){var m=
a.wtTransform?a.wtTransform:[1,0,0,1,0,0],r=h.transform_mult(m,j);m=h.transform_mult(m,i);var w=e(m)-e(r),F=c(m)-c(r),A=a.canvas.width+50,T=a.canvas.height+50;m=[];var o;function G(s){if(s<0)return 0;return s>1?1:s}function U(s){s=e(r)+s*w;return s>=-50&&s<=A}function V(s){s=c(r)+s*F;return s>=-50&&s<=T}if(w!==0){o=G((-50-e(r))/w);V(o)&&m.push(o);o=G((A-e(r))/w);V(o)&&m.push(o)}if(F!==0){o=G((-50-c(r))/F);U(o)&&m.push(o);o=G((T-c(r))/F);U(o)&&m.push(o)}var x=[],z=0;for(z=0;z<m.length;++z){o=m[z];
x.push([o,e(j)+o*(e(i)-e(j)),c(j)+o*(c(i)-c(j))])}x.sort(function(s,Z){return s[0]-Z[0]});for(z=1;z<x.length;)if(x[z][0]===x[z-1][0])x.splice(z,1);else++z;if(x.length===2){a.moveTo(x[0][1],x[0][2]);a.lineTo(x[1][1],x[1][2]);a.moveTo(e(i),c(i))}}else a.lineTo(e(i),c(i))})();break;case $:p.push(e(i),c(i));break;case aa:p.push(e(i),c(i));break;case J:p.push(e(i),c(i));a.bezierCurveTo.apply(a,p);p=[];break;case S:n.push(e(i),c(i));break;case H:n.push(e(i));break;case I:n.push(e(i)*Math.PI/180,c(i)*Math.PI/
180,c(i)>0);a.arc.apply(a,n);n=[];break;case ba:q.push(e(i));break;case K:q.push(e(i),c(i));a.quadraticCurveTo.apply(a,q);q=[];break}}d&&a.fill();f&&a.stroke();g&&a.clip()};this.drawStencilAlongPath=function(a,b,d,f,g,e){function c(q){return q[0]}function l(q){return q[1]}function k(q){return q[2]}var p=0;for(p=0;p<d.length;p++){var n=d[p];if(!(e&&a.wtClipPath&&!h.pnpoly(n,h.transform_apply(a.wtClipPathTransform,a.wtClipPath))))if(k(n)==E||k(n)==D||k(n)==K||k(n)==J){n=h.transform_apply([1,0,0,1,c(n),
l(n)],b);h.drawPath(a,n,f,g,false)}}};this.drawText=function(a,b,d,f,g){if(!(g&&a.wtClipPath&&!h.pnpoly(g,h.transform_apply(a.wtClipPathTransform,a.wtClipPath)))){var e=d&M;var c=g=null;switch(d&ca){case W:a.textAlign="left";g=h.rect_left(b);break;case X:a.textAlign="right";g=h.rect_right(b);break;case Y:a.textAlign="center";g=h.rect_center(b).x;break}switch(e){case N:a.textBaseline="top";c=h.rect_top(b);break;case O:a.textBaseline="bottom";c=h.rect_bottom(b);break;case P:a.textBaseline="middle";
c=h.rect_center(b).y;break}if(!(g==null||c==null)){b=a.fillStyle;a.fillStyle=a.strokeStyle;a.fillText(f,g,c);a.fillStyle=b}}};this.calcYOffset=function(a,b,d,f){return f===P?-((b-1)*d/2)+a*d:f===N?a*d:f===O?-(b-1-a)*d:0};this.drawTextOnPath=function(a,b,d,f,g,e,c,l,k){function p(A){return A[0]}function n(A){return A[1]}function q(A){return A[2]}var i=0,j=0;f=h.transform_apply(f,g);for(i=0;i<g.length;i++){if(i>=b.length)break;j=g[i];var m=f[i],r=b[i].split("\n");if(q(j)==E||q(j)==D||q(j)==K||q(j)==
J)if(e==0)for(j=0;j<r.length;j++){var w=h.calcYOffset(j,r.length,c,l&M);h.drawText(a,[d[0]+p(m),d[1]+n(m)+w,d[2],d[3]],l,r[j],k?[p(m),n(m)]:null)}else{w=e*Math.PI/180;j=Math.cos(-w);w=-Math.sin(-w);var F=-w;a.save();a.transform(j,F,w,j,p(m),n(m));for(j=0;j<r.length;j++){w=h.calcYOffset(j,r.length,c,l&M);h.drawText(a,[d[0],d[1]+w,d[2],d[3]],l,r[j],k?[p(m),n(m)]:null)}a.restore()}}};this.setClipPath=function(a,b,d,f){if(f){a.setTransform.apply(a,d);h.drawPath(a,b,false,false,true);a.setTransform(1,
0,0,1,0,0)}a.wtClipPath=b;a.wtClipPathTransform=d};this.removeClipPath=function(a){delete a.wtClipPath;delete a.wtClipPathTransform};this.rect_top=function(a){return a[1]};this.rect_bottom=function(a){return a[1]+a[3]};this.rect_right=function(a){return a[0]+a[2]};this.rect_left=function(a){return a[0]};this.rect_topleft=function(a){return[a[0],a[1]]};this.rect_topright=function(a){return[a[0]+a[2],a[1]]};this.rect_bottomleft=function(a){return[a[0],a[1]+a[3]]};this.rect_bottomright=function(a){return[a[0]+
a[2],a[1]+a[3]]};this.rect_center=function(a){return{x:(2*a[0]+a[2])/2,y:(2*a[1]+a[3])/2}};this.rect_normalized=function(a){var b,d,f;if(a[2]>0){b=a[0];f=a[2]}else{b=a[0]+a[2];f=-a[2]}if(a[3]>0){d=a[1];a=a[3]}else{d=a[1]+a[3];a=-a[3]}return[b,d,f,a]}}var t=0,u=1,v=2,y=3,B=4,C=5,E=0,D=1,$=2,aa=3,J=4,ba=5,K=6,S=7,H=8,I=9,W=1,X=2,Y=4,N=128,P=512,O=1024,M=112|N|256|P|O|2048,ca=W|X|Y|8;return new Q}());
