WT_DECLARE_WT_MEMBER(10,JavaScriptConstructor,"WPaintedWidget",function(P,t){jQuery.data(t,"obj",this);var u=this;this.imagePreloaders=[];this.images=[];this.canvas=document.getElementById("c"+t.id);this.repaint=function(){};this.widget=t;this.cancelPreloaders=function(){for(var v=0;v<u.imagePreloaders.length;++v)u.imagePreloaders[v].cancel();u.imagePreloaders=[]}});
WT_DECLARE_WT_MEMBER(11,JavaScriptObject,"gfxUtils",function(){function P(){var h=this;this.path_crisp=function(a){return a.map(function(b){return[Math.floor(b[0])+0.5,Math.floor(b[1])+0.5,b[2]]})};this.transform_mult=function(a,b){if(b.length===2){var d=b[0],f=b[1];return[a[t]*d+a[v]*f+a[A],a[u]*d+a[x]*f+a[B]]}if(b.length===3){if(b[2]===G||b[2]===H)return b.slice(0);d=b[0];f=b[1];return[a[t]*d+a[v]*f+a[A],a[u]*d+a[x]*f+a[B],b[2]]}if(b.length===4){var g,e,c,l;e=h.transform_mult(a,[b[0],b[1]]);d=e[0];
g=e[0];f=e[1];e=e[1];for(c=0;c<3;++c){l=h.transform_mult(a,c==0?[h.rect_left(b),h.rect_bottom(b)]:c==1?[h.rect_right(b),h.rect_top(b)]:[h.rect_right(b),h.rect_bottom(b)]);d=Math.min(d,l[0]);g=Math.max(g,l[0]);f=Math.min(f,l[1]);e=Math.max(e,l[1])}return[d,f,g-d,e-f]}if(b.length===6)return[a[t]*b[t]+a[v]*b[u],a[u]*b[t]+a[x]*b[u],a[t]*b[v]+a[v]*b[x],a[u]*b[v]+a[x]*b[x],a[t]*b[A]+a[v]*b[B]+a[A],a[u]*b[A]+a[x]*b[B]+a[B]];return[]};this.transform_apply=function(a,b){var d=h.transform_mult;return b.map(function(f){return d(a,
f)})};this.transform_det=function(a){return a[t]*a[x]-a[u]*a[v]};this.transform_adjoint=function(a){var b=a[t],d=a[v],f=a[u],g=a[x],e=a[A];a=a[B];return[g,-d,-f,b,a*f-e*g,-(a*b-e*d)]};this.transform_inverted=function(a){var b=h.transform_det(a);if(b!=0){a=h.transform_adjoint(a);return[a[t]/b,a[v]/b,a[u]/b,a[x]/b,a[A]/b,a[B]/b]}else{console.log("inverted(): oops, determinant == 0");return a}};this.transform_assign=function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5]};this.transform_equal=
function(a,b){return a[0]==b[0]&&a[1]==b[1]&&a[2]==b[2]&&a[3]==b[3]&&a[4]==b[4]&&a[5]==b[5]};this.css_text=function(a){return"rgba("+a[0]+","+a[1]+","+a[2]+","+a[3]+")"};this.arcPosition=function(a,b,d,f,g){g=-g/180*Math.PI;return[a+d*Math.cos(g),b+f*Math.sin(g)]};this.pnpoly=function(a,b){var d=false,f=0,g=0,e=a[0];a=a[1];var c,l,k;for(c=0;c<b.length;++c){l=f;k=g;if(b[c][2]===Q){k=h.arcPosition(b[c][0],b[c][1],b[c+1][0],b[c+1][1],b[c+2][0]);l=k[0];k=k[1]}else if(b[c][2]===H){k=h.arcPosition(b[c-
2][0],b[c-2][1],b[c-1][0],b[c-1][1],b[c][0]+b[c][1]);l=k[0];k=k[1]}else if(b[c][2]!==G){l=b[c][0];k=b[c][1]}if(b[c][2]!==D)if(g>a!==k>a&&e<(l-f)*(a-g)/(k-g)+f)d=!d;f=l;g=k}return d};this.rect_intersection=function(a,b){a=h.rect_normalized(a);b=h.rect_normalized(b);var d=h.rect_top,f=h.rect_bottom,g=h.rect_left,e=h.rect_right;g=Math.max(g(a),g(b));e=Math.min(e(a),e(b));d=Math.max(d(a),d(b));a=Math.min(f(a),f(b));return[g,d,e-g,a-d]};this.drawRect=function(a,b,d,f){b=h.rect_normalized(b);var g=h.rect_top(b),
e=h.rect_bottom(b),c=h.rect_left(b);b=h.rect_right(b);path=[[c,g,D],[b,g,C],[b,e,C],[c,e,C],[c,g,C]];h.drawPath(a,path,d,f,false)};this.drawPath=function(a,b,d,f,g){function e(j){return j[0]}function c(j){return j[1]}function l(j){return j[2]}var k=0,q=[],m=[],r=[];a.beginPath();b.length>0&&l(b[0])!==D&&a.moveTo(0,0);for(k=0;k<b.length;k++){var i=b[k];switch(l(i)){case D:a.moveTo(e(i),c(i));break;case C:(function(){var j=k===0?[0,0]:b[k-1];if(!d&&!g&&f&&(e(i)-e(j)>16777216||c(i)-c(j)>16777216)){var p=
a.wtTransform?a.wtTransform:[1,0,0,1,0,0],s=h.transform_mult(p,j),o=h.transform_mult(p,i);p=e(o)-e(s);o=c(o)-c(s);var F=a.canvas.width+50,z=a.canvas.height+50,E=[],n;if(p!==0){n=(-50-e(s))/p;E.push(n);n=(F-e(s))/p;E.push(n)}if(o!==0){n=(-50-c(s))/o;E.push(n);n=(z-c(s))/o;E.push(n)}var w=[],y=0;for(y=0;y<E.length;++y){n=E[y];if(n<0)n=0;if(n>1)n=1;var S=e(s)+n*p,T=c(s)+n*o;S>=-50&&S<=F&&T>=-50&&T<=z&&w.push([n,e(j)+n*(e(i)-e(j)),c(j)+n*(c(i)-c(j))])}w.sort(function(X,Y){return X[0]-Y[0]});for(y=1;y<
w.length;)if(w[y][0]===w[y-1][0])w.splice(y,1);else++y;if(w.length===2){a.moveTo(w[0][1],w[0][2]);a.lineTo(w[1][1],w[1][2]);a.moveTo(e(i),c(i))}}else a.lineTo(e(i),c(i))})();break;case Z:q.push(e(i),c(i));break;case $:q.push(e(i),c(i));break;case I:q.push(e(i),c(i));a.bezierCurveTo.apply(a,q);q=[];break;case Q:m.push(e(i),c(i));break;case G:m.push(e(i));break;case H:m.push(e(i)*Math.PI/180,c(i)*Math.PI/180,c(i)>0);a.arc.apply(a,m);m=[];break;case aa:r.push(e(i));break;case J:r.push(e(i),c(i));a.quadraticCurveTo.apply(a,
r);r=[];break}}d&&a.fill();f&&a.stroke();g&&a.clip()};this.drawStencilAlongPath=function(a,b,d,f,g,e){function c(r){return r[0]}function l(r){return r[1]}function k(r){return r[2]}var q=0;for(q=0;q<d.length;q++){var m=d[q];if(!(e&&a.wtClipPath&&!h.pnpoly(m,h.transform_apply(a.wtClipPathTransform,a.wtClipPath))))if(k(m)==D||k(m)==C||k(m)==J||k(m)==I){m=h.transform_apply([1,0,0,1,c(m),l(m)],b);h.drawPath(a,m,f,g,false)}}};this.drawText=function(a,b,d,f,g){if(!(g&&a.wtClipPath&&!h.pnpoly(g,h.transform_apply(a.wtClipPathTransform,
a.wtClipPath)))){var e=d&K;var c=g=null;switch(d&ba){case U:a.textAlign="left";g=h.rect_left(b);break;case V:a.textAlign="right";g=h.rect_right(b);break;case W:a.textAlign="center";g=h.rect_center(b).x;break}switch(e){case M:a.textBaseline="top";c=h.rect_top(b);break;case N:a.textBaseline="bottom";c=h.rect_bottom(b);break;case O:a.textBaseline="middle";c=h.rect_center(b).y;break}if(!(g==null||c==null)){b=a.fillStyle;a.fillStyle=a.strokeStyle;a.fillText(f,g,c);a.fillStyle=b}}};this.calcYOffset=function(a,
b,d,f){return f===O?-((b-1)*d/2)+a*d:f===M?a*d:f===N?-(b-1-a)*d:0};this.drawTextOnPath=function(a,b,d,f,g,e,c,l,k){function q(z){return z[0]}function m(z){return z[1]}function r(z){return z[2]}var i=0,j=0;f=h.transform_apply(f,g);for(i=0;i<g.length;i++){if(i>=b.length)break;j=g[i];var p=f[i],s=b[i].split("\n");if(r(j)==D||r(j)==C||r(j)==J||r(j)==I)if(e==0)for(j=0;j<s.length;j++){var o=h.calcYOffset(j,s.length,c,l&K);h.drawText(a,[d[0]+q(p),d[1]+m(p)+o,d[2],d[3]],l,s[j],k?[q(p),m(p)]:null)}else{o=
e*Math.PI/180;j=Math.cos(-o);o=-Math.sin(-o);var F=-o;a.save();a.transform(j,F,o,j,q(p),m(p));for(j=0;j<s.length;j++){o=h.calcYOffset(j,s.length,c,l&K);h.drawText(a,[d[0],d[1]+o,d[2],d[3]],l,s[j],k?[q(p),m(p)]:null)}a.restore()}}};this.setClipPath=function(a,b,d,f){if(f){a.setTransform.apply(a,d);h.drawPath(a,b,false,false,true);a.setTransform(1,0,0,1,0,0)}a.wtClipPath=b;a.wtClipPathTransform=d};this.removeClipPath=function(a){delete a.wtClipPath;delete a.wtClipPathTransform};this.rect_top=function(a){return a[1]};
this.rect_bottom=function(a){return a[1]+a[3]};this.rect_right=function(a){return a[0]+a[2]};this.rect_left=function(a){return a[0]};this.rect_topleft=function(a){return[a[0],a[1]]};this.rect_topright=function(a){return[a[0]+a[2],a[1]]};this.rect_bottomleft=function(a){return[a[0],a[1]+a[3]]};this.rect_bottomright=function(a){return[a[0]+a[2],a[1]+a[3]]};this.rect_center=function(a){return{x:(2*a[0]+a[2])/2,y:(2*a[1]+a[3])/2}};this.rect_normalized=function(a){var b,d,f;if(a[2]>0){b=a[0];f=a[2]}else{b=
a[0]+a[2];f=-a[2]}if(a[3]>0){d=a[1];a=a[3]}else{d=a[1]+a[3];a=-a[3]}return[b,d,f,a]}}var t=0,u=1,v=2,x=3,A=4,B=5,D=0,C=1,Z=2,$=3,I=4,aa=5,J=6,Q=7,G=8,H=9,U=1,V=2,W=4,M=128,O=512,N=1024,K=112|M|256|O|N|2048,ba=U|V|W|8;return new P}());
